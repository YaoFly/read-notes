# Lucene实战

## 索引过程的核心类
* Index Writer
* Directory
* Analyzer
* Document
* Field

## 搜索过程的核心类
* IndexSearcher
* Term
* Query
* TermQuery
* TopDocs

### 文档和域
文档是Lucene索引和搜索的原子单位。文档包含一个活多个域的容器，而域则依次包含“真正的”被搜索的内容

### 段
Lucene 索引都包含一个或多个段，每个段都是一个独立的索引，它包含整个文档的一个子集。每当writer摔性能缓冲区增加的文档，以及挂机目录操作时，索引文件都会建立一个新段。
在搜索索引时，每个段都是单独访问的。但搜索结果是合并后返回。
当程序开关writer比较频繁时，IndexWriter会周期性选择一些段，合并到新段并删除老的段。

### QueryParser
讲用户输入的查询表达式进行解析成一个Query类

### 近实时搜索的使用
见例子

### 分析 Analysis
将域Field文本转换成最基本的索引表示单元--项Term的过程。

一个语汇单元携带了一些文本值（即单词本身）和其他一些元数据：原始文本从起点到终点的偏移量，语汇单元类型以及位置增量

#### 起点的偏移量
指语汇单元文本的起始字符在原始文本中的位置，而终点偏移量则表示语汇单元文本终止字符的下一个位置

#### 位置增量
使当前语汇单元和前一个语汇单元在位置上关联起来。当位置增量大于1，则表示每个单词存在于域中唯一且连续的位置上。直接影响短语查询和跨度查询
如果位置增量大于1，则允许语汇单元之间有空隙。移除停用词
位置增量为0的语汇单元表示将该语汇单元放置在前一个语汇单元的位置上。同义词分析器可以通过0增量来表示插入的同义词。

### 分析器链 analyzer chain
分析器链以一个Tokenizer对象开始，通过Reader对象读取字符并产生初始语汇单元，然后用任意数量链接的TokenFilter对象修改这些语汇单元。


